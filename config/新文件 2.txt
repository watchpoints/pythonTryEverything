高可用定义
范围：主要是近端集群任务分配，任务执行和故障后任务恢复或者重新 分配

(1) 任务分配 和 故障后任务重新分配: 
	a:需要选出一个可用节点负责任务分配，任务重新分配。
	b:判断其他Backend服务迁移任务。
	  无服务可用情况，暂时各自任务，等故障恢复后继续迁移。
	
	如何选出一个可用的服务
	在网络分区情况下，通过超时判断，设置不同tick周期，ps 进程是存在方式都不准确。
	需要借助已经实现方式 mon,管软ctdb 或者自定义判断。

(2) 任务执行:
	 a:已经迁移过文件不会重复迁移，服务故障后重启恢复继续重新迁移
	 b:没有迁移过文件，多个节点对同一文件判断未迁移。
	  要支持同时重复迁移或者避免同时重复迁移
任务分配触发方式
(1) 请求触发，及时处理.
    这个情况不适合扫描目录，增加mds负担
(2) 自迁移，故障情况下任务撤回情况后台出来
    不一定及时相应。


待确认部分
(1) 如何判断一个服务（节点，网络，正常工作）
(2) 多节点迁移同一个文件
(3) 管软任务分配，故障后任务重新分配，自迁移可能分配任务功能重复部分，
    统一进行处理

现场环境出现core，用同样安装包，同样镜像ios
https://blog.csdn.net/qazxlf/article/details/50385616
(2)
存在分线
 
没有迁移过文件，多个节点对同一文件都会判断判断没有迁移
导致多个节点迁移迁移同一个文件，对应场景 存力重试，迁移超，任务加载分配等环节出现冲突
	  
	 
	 




1. 迁移进程不存在，如何区分是临时故障还是永久故障，检测频率怎么判断 
2. 网络隔离，2个进程迁移同一个文件怎么处理



1. 不能通过ps 进程方式保证服务是否正常(管理网卡+ps)
2. 不能任务积压方式判断超时 ，大文件迁移
3. 


近端迁移高可用定义 ：
任务管理分为3个部分 1 任务分配 2任务执行3 故障后任务重新执行或者转移。

(1)	每个节点都可以执行任务，支持多节点迁移
在集群正常情况下保证至少有一个可用服务
不然 分配时候将未分配任务保存。执行任务记住各自任务

(2)	重复迁移文件不会重复迁移。任务执行时候服务故障后能自行恢复的继续重新迁移任务。


